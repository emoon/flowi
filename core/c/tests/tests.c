#include "../src/font.h"
#include "../src/internal.h"
#include "../src/linear_allocator.h"
#include "utest.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

UTEST(Io, load_file_fail) {
    u32 size = 0;
    const u8* data = Io_load_file_to_memory("dummy_not_found", &size);
    ASSERT_TRUE(data == NULL);
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

UTEST(Io, load_file_ok) {
    u32 size = 0;
    u8* data = Io_load_file_to_memory("data/montserrat-regular.ttf", &size);

    ASSERT_TRUE(data != NULL);
    ASSERT_TRUE(size == 245708);

	// TODO: Allocator
    free(data);
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

UTEST_STATE();

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

int main(int argc, const char* const argv[]) {
    int status = utest_main(argc, argv);
	return status;
}
